!function(){"use strict";function e(e,t,r,o,n,i){var a=o.id;e.$parent.title="Board",e.$parent.transparentNav=!1,e.rows=sessionStorage.getItem("gridRows")?_.parseInt(sessionStorage.getItem("gridRows")):n.gridDefaultRowCount,e.columns=sessionStorage.getItem("gridColumns")?_.parseInt(sessionStorage.getItem("gridColumns")):n.gridDefaultColumnCount,e.grid=[];for(var s=0;s<e.rows;s++){for(var u=[],c=0;c<e.columns;c++)u.push(c);e.grid.push(u)}e.manageGrid=function(t,r){if("row"==r){var o=[];for(s=0;s<e.columns;s++)o.push(s);switch(t){case"add":if(e.rows>n.gridMaxRows-1)return!1;e.rows=e.rows+1,e.grid.push(o);break;case"remove":if(e.rows<n.gridMinRows+1)return!1;e.rows=e.rows-1,e.grid.pop()}sessionStorage.setItem("gridRows",e.rows)}else if("column"==r){switch(t){case"add":if(e.columns>n.gridMaxColumns-1)return!1;for(s=0;s<e.rows;s++)e.grid[s].push(e.columns);e.columns=e.columns+1;break;case"remove":if(e.columns<n.gridMinColumns+1)return!1;for(s=0;s<e.rows;s++)e.grid[s].pop();e.columns=e.columns-1}sessionStorage.setItem("gridColumns",e.columns)}};var l=function(o,a,s,u){var c=function(){e.fadeInUmi=!0},l="uriFriendlyTitle"==o?appConfig.apiUrl+"/"+a:appConfig.apiUrl+"/"+o+"/"+a;t.get(l).success(function(t){u&&(t.targetClasses=u),e.grid[s[0]][s[1]]=t,r(c,n.fadeUmiTimeout)}).error(function(){i.generate("There was an error loading requested contribution.","error",e.$parent)})};l("uriFriendlyTitle",a,[1,1],!1),e.position=function(t,r,o,n){var i=[];if("up"==o)var a=[t-1,r];else if("down"==o)var a=[t+1,r];else if("left"==o)var a=[t,r-1];else if("right"==o)var a=[t,r+1];0==a[0]?i.push("closes-top"):a[0]==e.rows-1?i.push("closes-bottom"):0==a[1]?i.push("closes-left"):a[1]==e.columns-1&&i.push("closes-right"),l("id",n,[a[0],a[1]],i.join(" "))}}angular.module("omApp").controller("BoardController",e).constant("magic",{gridDefaultRowCount:3,gridDefaultColumnCount:3,gridMaxRows:6,gridMinRows:2,gridMaxColumns:6,gridMinColumns:2,fadeUmiTimeout:250}),e.$inject=["$scope","$http","$timeout","$routeParams","magic","notification"]}(),function(){"use strict";function e(e,t,r){e.$parent.title="Dive Into",e.$parent.transparentNav=!0,e.getUmi=function(o){return o?void t.path("/board/"+o):e.searchUmiResults?(r.error("No URI argument present"),!1):(r.error("No URI argument present"),!1)}}angular.module("omApp").controller("DiveController",e),e.$inject=["$scope","$location","$log"]}(),function(){"use strict";function e(e,t,r){e.title="Page",e.siteName=appConfig.siteName,e.siteLanguage=appConfig.siteLanguage,e.description=appConfig.description[appConfig.siteLanguage],e.$watch(function(){return t.path()},function(){var o=t.url().split("/");e.path=""==o[1]?"dive":o[1],r.ga("send","pageview",{page:t.path()})})}angular.module("omApp").controller("GlobalController",e),e.$inject=["$scope","$location","$window"]}(),function(){"use strict";function e(){var e={restrict:"EA",templateUrl:"app/sections/section.global/nav-top.layout.html"};return e}angular.module("omApp").directive("navTop",e)}(),function(){"use strict";function e(e,t){function r(r){var o=2500;t.subscribe(function(t){r.notification=t,r.act=!0,e(function(){r.act=!1},o)})}var o={restrict:"EA",templateUrl:"app/sections/section.global/notification.layout.html",scope:{},replace:!0,link:r};return o}angular.module("omApp").directive("notificationDirective",e),e.$inject=["$timeout","notification"]}(),function(){"use strict";function e(e){function t(e){o.push(e)}function r(t,r){switch(r){case"info":e.info(t);break;case"warning":e.warn(t);break;case"error":e.error(t);break;case"success":e.success(t);break;default:r="info",e.info(t)}var n={message:t,type:r};_.forEach(o,function(e){e(n)})}var o=[];return{subscribe:t,generate:r}}angular.module("omApp").factory("notification",e),e.$inject=["$log"]}(),function(){"use strict";function e(e,t,r){var o=40,n=38,i=13,a=40;e.searchResultsNavigate=function(t,r,a){if(!t)return!1;var s=_.keys(t.data).length,u=t.currentSelection;if(r.keyCode==i)if(r.preventDefault(),"getUmi"==_.first(a)){var c=e.searchResults.data[e.searchResults.currentSelection].uriFriendlyTitle;e.$parent[a](c)}else"autocomplete"==_.first(a)&&e.autocomplete(a[1]);return r.keyCode==n&&u>0?(r.preventDefault(),t.currentSelection=u-1):r.keyCode==o&&s-1>u&&(r.preventDefault(),t.currentSelection=u+1),!1},e.search=function(o,n,i){n&&(e.showAutocomplete=!0);var a=function(t,r){var o=t.split("."),n=_.first(o);return o.length>1?(o.reverse().pop(),a(o.reverse().join("."),e[n])):r?r[n]:e[n]},a=a(o,!1),u=a.length;u>0?(i&&s(u),t.get(appConfig.apiUrl+"/search/"+a).success(function(t){if(t.length>0){var o={currentSelection:0,data:t};e.searchResults=o}else e.searchResults=!1,r.generate("No results found :-(","info",e.$parent.$parent)}).error(function(){r.generate("There was an error with the connection to our API.","error",e.$parent.$parent)})):e.searchResults=!1},e.autocomplete=function(t,r){var o=e.searchResults,n=r?o.data[r]:o.data[o.currentSelection];if(e.createUmiForm[t]="",e.showAutocomplete=!1,e.searchResults=!1,e.autocompleteData[t])e.autocompleteData[t][n.id]=n.title;else{var i={};i[n.id]=n.title,e.autocompleteData[t]=i}},e.removeUmiId=function(t,r){delete e.autocompleteData[t][r]};var s=function(e){if(a>e){var t=e*(100/a)+"%";document.getElementById("masthead").style.backgroundPositionY=t}}}angular.module("omApp").controller("SearchController",e),e.$inject=["$scope","$http","notification"]}();